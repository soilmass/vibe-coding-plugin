name: Stale Issues & PRs

on:
  schedule:
    - cron: '0 9 * * *' # Daily at 9 AM UTC
  workflow_dispatch:

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/stale@v10
        with:
          # Issues
          days-before-issue-stale: 60
          days-before-issue-close: 90
          stale-issue-label: stale
          stale-issue-message: >
            This issue has been automatically marked as stale because it has not had
            recent activity. It will be closed in 30 days if no further activity occurs.
            If this issue is still relevant, please comment to keep it open.
          close-issue-message: >
            This issue has been automatically closed due to inactivity.
            Feel free to reopen if it's still relevant.

          # Pull Requests
          days-before-pr-stale: 14
          days-before-pr-close: -1 # Never auto-close PRs
          stale-pr-label: stale
          stale-pr-message: >
            This pull request has been automatically marked as stale because it has not had
            recent activity. Please update or close it if it's no longer needed.

          # Exemptions
          exempt-issue-labels: pinned,security,bug
          exempt-pr-labels: pinned,security
